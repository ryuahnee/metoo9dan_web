# ë°”ë‘‘ì„ ê²Œì„ìœ¼ë¡œ! 'ë‚˜ë„ 9ë‹¨'  

<div align="center">
<img width="80%" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-10-27 á„‹á…©á„Œá…¥á†« 9 50 06" src="https://github.com/ryuahnee/metoo9dan_web/assets/135402890/84c4adb7-b55f-4662-b6c9-063e70a88479">
</div>

<br>

## ğŸ–¥ï¸ í”„ë¡œì íŠ¸ ì†Œê°œ

**â€˜ë‚˜ë„ 9ë‹¨â€™** ì€ í¬ìŠ¤íŠ¸ì½”ë¡œë‚˜ ì´í›„ ë¹„ëŒ€ë©´ êµìœ¡ ì„œë¹„ìŠ¤ê°€ í™œë°œí•´ì§ì— ë”°ë¼ ì˜¨ë¼ì¸ìœ¼ë¡œë„ í¸ë¦¬í•˜ê²Œ í•™ì› ë° í•™êµ ë°©ê³¼ í›„ í•™ìŠµì„ ì§„í–‰ì„ ë•ê¸° ìœ„í•´ ê°œë°œí•œ ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤.
-  êµìœ¡ìì™€ ì¼ë°˜íšŒì›ì¸ ê²½ìš° ê²Œì„ì½˜í…ì¸ ë¥¼ êµ¬ë§¤í•  ìˆ˜ ìˆìœ¼ë©°, ê²Œì„ì½˜í…ì¸ ì—ëŠ” ë°”ë‘‘êµìœ¡ìë£Œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
-  êµìœ¡ìëŠ” ê²°ì œë¥¼ ì§„í–‰í•˜ì—¬ í•™ìŠµê·¸ë£¹ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
-  í•™ìŠµìë“¤ì€ êµìœ¡ìê°€ ìƒì„±í•œ í•™ìŠµê·¸ë£¹ì— ê°€ì…í•˜ì—¬ êµìœ¡ìê°€ ë°°í¬í•˜ëŠ” ìˆ™ì œë¥¼ ì œì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
-  êµìœ¡ìëŠ” í•™ìŠµìê°€ ì œì¶œí•œ ìˆ™ì œë¥¼ í‰ê°€í•©ë‹ˆë‹¤.

<br>

## ğŸ—“ï¸ í”„ë¡œì íŠ¸ ìƒì„¸

* ê¸°ê°„ : 2023.09.19 ~ 10.24
* ì¸ì› : 5ëª… (ê¸°ìˆ íŒ€ì¥)
* ë¶„ë¥˜ : Spring Boot ê¸°ë°˜ íŒ€ í”„ë¡œì íŠ¸
* ì–¸ì–´ : Java(JDK 17), Spring Boot, Javascrip, JPA, Ajax, HTML5/CSS3
* ì„œë²„ : Apache Tomcat 9.0
* DB : MariaDB(10.11.2)
* API & library : Spring Security, KaKao Pay API, Scheduler API, Mail API, Thymeleaf

<br>

## ğŸ’¡ ì£¼ìš” ì—­í•  
- Chart.js - ì¼,ì›” ë³„ ë§¤ì¶œì¡°íšŒ 
- Kakao pay API ì—°ë™ 
- Session Storage ì‚¬ìš© ì¥ë°”êµ¬ë‹ˆ êµ¬í˜„
- DockerÂ MariaDBì„œë²„Â êµ¬ì¶•Â 
- DB ì„¤ê³„  

---

## â•ì‹ ê²½ì“´ ë¶€ë¶„
* â€˜ì—¬ëŸ¬ê±´ ë™ì‹œ ê²°ì œâ€™ DBì €ì¥ ë°©ë²•
*  ### ì‹¤ì œ ì‡¼í•‘ëª°ì—ì„œ ë‹¤ì¤‘ì„ íƒ í›„ ì¼ê´„ê²°ì œì‹œ ì €ì¥ ë°©ë²•ì— ëŒ€í•´ ìë¬¸ì„ êµ¬í•´ ê²°ì œë²ˆí˜¸ëŠ” PKë¡œ, ì£¼ë¬¸ë²ˆí˜¸ëŠ” í•´ë‹¹ ê²°ì œê±´ì˜ ìƒí’ˆë“¤ì˜ ì£¼ë¬¸ë²ˆí˜¸ë¥¼ í†µì¼í•˜ì—¬ êµ¬ë¶„í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤. 

  <img width="384" alt="image" src="https://github.com/ryuahnee/metoo9dan_web/assets/135402890/e5421abd-4022-417c-9c48-e29056303e65">
  <img width="613" alt="image" src="https://github.com/ryuahnee/metoo9dan_web/assets/135402890/55de5d4c-4652-4168-9897-89e8344ff873">

<pre><code>
  @Repository
public interface PaymentsRepository extends JpaRepository<Payments, Integer> {

    // ê°€ì¥ í° OrderNumberê°’ ê°€ì ¸ì˜´
    @Query("SELECT MAX(p.orderNumber) FROM Payments p")
    Integer findMaxOrderNumber();
</code></pre>

<pre><code>
  // OrderNumberì˜ ê°€ì¥ í° ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
  @Service
@RequiredArgsConstructor
public class PaymentsService {

    private final PaymentsRepository paymentsRepository;
    private final GameService gameService;
    private EntityManager entityManager;
  
    public int generateOrderNumber() {
        Integer maxOrderNumber = paymentsRepository.findMaxOrderNumber();
        if (maxOrderNumber == null) {
            // ì£¼ë¬¸ ë²ˆí˜¸ë¥¼ ìƒì„±í•  ë°ì´í„°ê°€ ì—†ë‹¤ë©´ 1ë¡œ ì‹œì‘
            return 1;
        } else {
            // ê°€ì¥ í° ì£¼ë¬¸ ë²ˆí˜¸ë¥¼ ì°¾ì•„ì„œ 1ì„ ë”í•¨
            int newOrderNumber = maxOrderNumber + 1;
            return newOrderNumber;
        }
    }
</code></pre>

* ì¥ë°”êµ¬ë‹ˆ ê¸°ëŠ¥ êµ¬í˜„ 

<pre><code>
    // ì²´í¬ ë°•ìŠ¤ê°€ ì„ íƒëœ ê²½ìš°
      if (checkbox.checked) {
          var gameContentNo = checkbox.value;
          totalItemsElement.textContent = selectedGameContentNos.length;
          total += salePrice;

            if (totalItemsElement) {
              totalItemsElement.textContent = selectedGameContentNos.length;
           }

          // ì„ íƒëœ ê²Œì„ ì½˜í…ì¸  ë²ˆí˜¸ì™€ salePriceë¥¼ ë°°ì—´ì— ì¶”ê°€í•˜ê³  ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
          if (!selectedGameContentNos.includes(gameContentNo)) {
              selectedGameContentNos.push(gameContentNo);
              selectedSalePrices.push(salePrice);
              sessionStorage.setItem("selectedGameContentNos", JSON.stringify(selectedGameContentNos));
              sessionStorage.setItem("selectedSalePrices", JSON.stringify(selectedSalePrices));
          }
      } else {
          var gameContentNo = checkbox.value;
          total -= salePrice;

          // ì„ íƒ í•´ì œëœ ê²Œì„ ì½˜í…ì¸  ë²ˆí˜¸ì™€ salePriceë¥¼ ë°°ì—´ì—ì„œ ì œê±°í•˜ê³  ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ë¥¼ ì—…ë°ì´íŠ¸
          selectedGameContentNos = selectedGameContentNos.filter(function (value) {
              return value !== gameContentNo;
          });

          var salePriceIndex = selectedGameContentNos.indexOf(gameContentNo);
          if (salePriceIndex !== -1) {
              selectedSalePrices.splice(salePriceIndex, 1);
          }
  
          sessionStorage.setItem("selectedGameContentNos", JSON.stringify(selectedGameContentNos));
          sessionStorage.setItem("selectedSalePrices", JSON.stringify(selectedSalePrices));
      }

</code></pre>

#### â€£ [ì»¤ë°‹íˆìŠ¤í† ë¦¬ ë³´ëŸ¬ê°€ê¸°](https://github.com/ryuahnee/metoo9dan_web/commits/master)

---

